<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Estimators of the Expected Prognostic Observed Cross-Entropy (EPOCE) for evaluating predictive accuracy of joint latent class models estimated using Jointlcmm — epoce • lcmm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimators of the Expected Prognostic Observed Cross-Entropy (EPOCE) for evaluating predictive accuracy of joint latent class models estimated using Jointlcmm — epoce"><meta name="description" content="This function computes estimators of the Expected Prognostic Observed
Cross-Entropy (EPOCE) for evaluating the predictive accuracy of joint latent
class models estimated using Jointlcmm. On the same data as used for
estimation of the Jointlcmm object, this function computes both the
Mean Prognostic Observed Log-Likelihood (MPOL) and the Cross-Validated
Observed Log-Likelihood (CVPOL), two estimators of EPOCE. The latter
corrects the MPOL estimate for over-optimism by approximated
cross-validation. On external data, this function only computes the Mean
Prognostic Observed Log-Likelihood (MPOL)."><meta property="og:description" content="This function computes estimators of the Expected Prognostic Observed
Cross-Entropy (EPOCE) for evaluating the predictive accuracy of joint latent
class models estimated using Jointlcmm. On the same data as used for
estimation of the Jointlcmm object, this function computes both the
Mean Prognostic Observed Log-Likelihood (MPOL) and the Cross-Validated
Observed Log-Likelihood (CVPOL), two estimators of EPOCE. The latter
corrects the MPOL estimate for over-optimism by approximated
cross-validation. On external data, this function only computes the Mean
Prognostic Observed Log-Likelihood (MPOL)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">lcmm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/lcmm.html">GET STARTED</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">VIGNETTES</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/latent_class_model_with_hlme.html">How to estimate a latent class mixed model using hlme function</a></li>
    <li><a class="dropdown-item" href="../articles/latent_process_model_with_lcmm.html">How to estimate a latent process mixed model using lcmm function</a></li>
    <li><a class="dropdown-item" href="../articles/latent_process_model_with_multlcmm.html">How to estimate a latent process mixed model for multivariate markers using multlcmm function</a></li>
    <li><a class="dropdown-item" href="../articles/latent_process_model_with_multlcmm_IRT.html">Continuous-time longitudinal IRT model</a></li>
    <li><a class="dropdown-item" href="../articles/joint_latent_class_model_with_Jointlcmm.html">How to estimate a joint latent class mixed model using Jointlcmm function</a></li>
    <li><a class="dropdown-item" href="../articles/multivariate_latent_class_model_with_mpjlcmm.html">How to estimate a multivariate latent class mixed model using mpjlcmm function</a></li>
    <li><a class="dropdown-item" href="../articles/secondary_model_with_externVar.html">Accounting for latent class assignment uncertainty in subsequent analyses</a></li>
    <li><a class="dropdown-item" href="../articles/pre_normalizing.html">Pre-normalizing a dependent variable using lcmm</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../articles/usual_problems.html">FAQ</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">REFERENCE</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">CHANGELOG</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CecileProust-Lima/lcmm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Estimators of the Expected Prognostic Observed Cross-Entropy (EPOCE) for evaluating predictive accuracy of joint latent class models estimated using <code>Jointlcmm</code></h1>
      <small class="dont-index">Source: <a href="https://github.com/CecileProust-Lima/lcmm/blob/HEAD/R/epoce.R" class="external-link"><code>R/epoce.R</code></a></small>
      <div class="d-none name"><code>epoce.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function computes estimators of the Expected Prognostic Observed
Cross-Entropy (EPOCE) for evaluating the predictive accuracy of joint latent
class models estimated using <code>Jointlcmm</code>. On the same data as used for
estimation of the <code>Jointlcmm</code> object, this function computes both the
Mean Prognostic Observed Log-Likelihood (MPOL) and the Cross-Validated
Observed Log-Likelihood (CVPOL), two estimators of EPOCE. The latter
corrects the MPOL estimate for over-optimism by approximated
cross-validation. On external data, this function only computes the Mean
Prognostic Observed Log-Likelihood (MPOL).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">epoce</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  <span class="va">pred.times</span>,</span>
<span>  <span class="va">var.time</span>,</span>
<span>  fun.time <span class="op">=</span> <span class="va">identity</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na.action <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>an object inheriting from class <code>Jointlcmm</code></p></dd>


<dt id="arg-pred-times">pred.times<a class="anchor" aria-label="anchor" href="#arg-pred-times"></a></dt>
<dd><p>Vector of times of prediction, from which predictive
accuracy is evaluated (only subjects still at risk at the time of prediction
are included in the computation, and only information before the time of
prediction is considered.</p></dd>


<dt id="arg-var-time">var.time<a class="anchor" aria-label="anchor" href="#arg-var-time"></a></dt>
<dd><p>Name of the variable indicating time in the dataset</p></dd>


<dt id="arg-fun-time">fun.time<a class="anchor" aria-label="anchor" href="#arg-fun-time"></a></dt>
<dd><p>an optional function. This is only required if the time
scales in the longitudinal part of the model and the survival part are
different. In that case, <code>fun.time</code> is the function that translates the
times from the longitudinal part into the time scale of the survival part.
The default is the identity function which means that the two time scales
are the same.</p></dd>


<dt id="arg-newdata">newdata<a class="anchor" aria-label="anchor" href="#arg-newdata"></a></dt>
<dd><p>optional. When missing, the data used for estimating the
<code>Jointlcmm</code> object are used, and CVPOL and MPOL are computed (internal
validation). When newdata is specified, only MPOL is computed on this
newdataset (external validation).</p></dd>


<dt id="arg-subset">subset<a class="anchor" aria-label="anchor" href="#arg-subset"></a></dt>
<dd><p>a specification of the rows to be used: defaults to all rows.
This can be any valid indexing vector for the rows of data or if that is not
supplied, a data frame made up of the variable used in formula.</p></dd>


<dt id="arg-na-action">na.action<a class="anchor" aria-label="anchor" href="#arg-na-action"></a></dt>
<dd><p>Integer indicating how NAs are managed. The default is 1
for 'na.omit'. The alternative is 2 for 'na.fail'. Other options such as
'na.pass' or 'na.exclude' are not implemented in the current version.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>


<dl><dt>call.Jointlcmm</dt>
<dd><p>the <code>Jointlcmm</code> call</p></dd>

<dt>call.epoce</dt>
<dd><p>the matched call</p></dd>
 <dt>EPOCE</dt>
<dd><p>Dataframe containing, for
each prediction time s, the number of subjects still at risk at s (and with
at least one measure before s), the number of events after time s, the MPOL,
and the CVPOL when computation is done on the dataset used for
<code>Jointlcmm</code> estimation</p></dd>
 <dt>IndivContrib</dt>
<dd><p>Individual contributions to
the prognostic observed log-likelihood at each time of prediction. Used for
computing tracking intervals of EPOCE differences between models.</p></dd>

<dt>new.data</dt>
<dd><p>a boolean for internal use only, which is FALSE if
computation is done on the same data as for <code>Jointlcmm</code> estimation, and
TRUE otherwise.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function does not apply for the moment with multiple causes of event
(competing risks).</p>
<p>EPOCE assesses the prognostic information of a joint latent class model. It
relies on information theory.</p>
<p>MPOL computed at time s equals minus the mean individual contribution to the
conditional log-likelihood of the time to event given the longitudinal data
up to the time of prediction s and given the subject is still at risk of
event in s.</p>
<p>CVPOL computed at time s equals MPOL at time s plus a penalty term that
corrects for over-optimism when computing predictive accuracy measures on
the same dataset as used for estimation. This penalty term is computed from
the inverse of the Hessian of the joint log-likelihood and the product of
the gradients of the contributions to respectively the joint log-likelihood
and the conditional log-likelihood.</p>
<p>The theory of EPOCE and its estimators MPOL and CVPOL is given in Commenges
et al. (2012), and further detailed and illustrated for joint models in
Proust-Lima et al. (2013).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Commenges, Liquet and Proust-Lima (2012). Choice of prognostic
estimators in joint models by estimating differences of expected conditional
Kullback-Leibler risks. Biometrics 68(2), 380-7.</p>
<p>Proust-Lima, Sene, Taylor and Jacqmin-Gadda (2014). Joint latent class
models of longitudinal and time-to-event data: a review. Statistical Methods
in Medical Research 23, 74-90.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="Jointlcmm.html">Jointlcmm</a></code>, <code><a href="print.lcmm.html">print.epoce</a></code>, <code><a href="summary.lcmm.html">summary.epoce</a></code>, <code><a href="plot.pred.accuracy.html">plot.epoce</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Cecile Proust-Lima and Amadou Diakite</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">## estimation of a joint latent class model with 2 latent classes (ng=2)</span></span></span>
<span class="r-in"><span><span class="co"># (see the example section of Jointlcmm for details about</span></span></span>
<span class="r-in"><span><span class="co">#  the model specification)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="Jointlcmm.html">Jointlcmm</a></span><span class="op">(</span>fixed<span class="op">=</span> <span class="va">Ydep1</span><span class="op">~</span><span class="va">Time</span><span class="op">*</span><span class="va">X1</span>,random<span class="op">=</span><span class="op">~</span><span class="va">Time</span>,mixture<span class="op">=</span><span class="op">~</span><span class="va">Time</span>,subject<span class="op">=</span><span class="st">'ID'</span></span></span>
<span class="r-in"><span>,survival <span class="op">=</span> <span class="fu">Surv</span><span class="op">(</span><span class="va">Tevent</span>,<span class="va">Event</span><span class="op">)</span><span class="op">~</span> <span class="va">X1</span><span class="op">+</span><span class="va">X2</span> ,hazard<span class="op">=</span><span class="st">"Weibull"</span></span></span>
<span class="r-in"><span>,hazardtype<span class="op">=</span><span class="st">"PH"</span>,ng<span class="op">=</span><span class="fl">2</span>,data<span class="op">=</span><span class="va">data_lcmm</span>,logscale<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>B<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7608</span>, <span class="op">-</span><span class="fl">9.4974</span> , <span class="fl">1.0242</span>,  <span class="fl">1.4331</span> , <span class="fl">0.1063</span> , <span class="fl">0.6714</span>, <span class="fl">10.4679</span>, <span class="fl">11.3178</span>,</span></span>
<span class="r-in"><span> <span class="op">-</span><span class="fl">2.5671</span>, <span class="op">-</span><span class="fl">0.5386</span>,  <span class="fl">1.4616</span>, <span class="op">-</span><span class="fl">0.0605</span>,  <span class="fl">0.9489</span>,  <span class="fl">0.1020</span> , <span class="fl">0.2079</span>,  <span class="fl">1.5045</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Computation of the EPOCE on the same dataset as used for</span></span></span>
<span class="r-in"><span><span class="co"># estimation of m with times at predictions from 1 to 15 </span></span></span>
<span class="r-in"><span><span class="va">VecTime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">5</span>,<span class="fl">7</span>,<span class="fl">9</span>,<span class="fl">11</span>,<span class="fl">13</span>,<span class="fl">15</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cvpl</span> <span class="op">&lt;-</span> <span class="fu">epoce</span><span class="op">(</span><span class="va">m</span>,var.time<span class="op">=</span><span class="st">"Time"</span>,pred.times<span class="op">=</span><span class="va">VecTime</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cvpl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot.html">plot</a></span><span class="op">(</span><span class="va">cvpl</span>,bty<span class="op">=</span><span class="st">"l"</span>,ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cecile Proust-Lima, Viviane Philipps.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

