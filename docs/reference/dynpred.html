<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Individual dynamic predictions from a joint latent class model — dynpred • lcmm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Individual dynamic predictions from a joint latent class model — dynpred"><meta name="description" content="This function computes individual dynamic predictions and 95% confidence
bands. Given a joint latent class model, a landmark time s, a horizon time t
and measurements until time s, the predicted probability of event in the
window [s,s+t] is calculated. Confidence bands can be provided using a Monte
Carlo method."><meta property="og:description" content="This function computes individual dynamic predictions and 95% confidence
bands. Given a joint latent class model, a landmark time s, a horizon time t
and measurements until time s, the predicted probability of event in the
window [s,s+t] is calculated. Confidence bands can be provided using a Monte
Carlo method."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">lcmm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/lcmm.html">GET STARTED</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">VIGNETTES</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/latent_class_model_with_hlme.html">How to estimate a latent class mixed model using hlme function</a></li>
    <li><a class="dropdown-item" href="../articles/latent_process_model_with_lcmm.html">How to estimate a latent process mixed model using lcmm function</a></li>
    <li><a class="dropdown-item" href="../articles/latent_process_model_with_multlcmm.html">How to estimate a latent process mixed model for multivariate markers using multlcmm function</a></li>
    <li><a class="dropdown-item" href="../articles/latent_process_model_with_multlcmm_IRT.html">Continuous-time longitudinal IRT model</a></li>
    <li><a class="dropdown-item" href="../articles/joint_latent_class_model_with_Jointlcmm.html">How to estimate a joint latent class mixed model using Jointlcmm function</a></li>
    <li><a class="dropdown-item" href="../articles/multivariate_latent_class_model_with_mpjlcmm.html">How to estimate a multivariate latent class mixed model using mpjlcmm function</a></li>
    <li><a class="dropdown-item" href="../articles/secondary_model_with_externVar.html">Accounting for latent class assignment uncertainty in subsequent analyses</a></li>
    <li><a class="dropdown-item" href="../articles/pre_normalizing.html">Pre-normalizing a dependent variable using lcmm</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../articles/usual_problems.html">FAQ</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">REFERENCE</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">CHANGELOG</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CecileProust-Lima/lcmm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Individual dynamic predictions from a joint latent class model</h1>
      <small class="dont-index">Source: <a href="https://github.com/CecileProust-Lima/lcmm/blob/HEAD/R/dynpred.R" class="external-link"><code>R/dynpred.R</code></a></small>
      <div class="d-none name"><code>dynpred.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function computes individual dynamic predictions and 95% confidence
bands. Given a joint latent class model, a landmark time s, a horizon time t
and measurements until time s, the predicted probability of event in the
window [s,s+t] is calculated. Confidence bands can be provided using a Monte
Carlo method.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dynpred</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  <span class="va">newdata</span>,</span>
<span>  event <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">landmark</span>,</span>
<span>  <span class="va">horizon</span>,</span>
<span>  <span class="va">var.time</span>,</span>
<span>  fun.time <span class="op">=</span> <span class="va">identity</span>,</span>
<span>  na.action <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  draws <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ndraws <span class="op">=</span> <span class="fl">2000</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>an object inheriting from class <code>Jointlcmm</code>.</p></dd>


<dt id="arg-newdata">newdata<a class="anchor" aria-label="anchor" href="#arg-newdata"></a></dt>
<dd><p>a data frame containing the data from which predictions are
computed. This data frame must contain all the model's covariates, the
observations of the longitudinal and survival outcomes, the subject
identifier and if necessary the variables specified in prior and TimeDepVar
argumentsfrom Jointlcmm.</p></dd>


<dt id="arg-event">event<a class="anchor" aria-label="anchor" href="#arg-event"></a></dt>
<dd><p>integer giving the event for which the prediction is to be
calculated</p></dd>


<dt id="arg-landmark">landmark<a class="anchor" aria-label="anchor" href="#arg-landmark"></a></dt>
<dd><p>a numeric vector containing the landmark times.</p></dd>


<dt id="arg-horizon">horizon<a class="anchor" aria-label="anchor" href="#arg-horizon"></a></dt>
<dd><p>a numeric vector containing the horizon times.</p></dd>


<dt id="arg-var-time">var.time<a class="anchor" aria-label="anchor" href="#arg-var-time"></a></dt>
<dd><p>a character indicating the time variable in <code>newdata</code></p></dd>


<dt id="arg-fun-time">fun.time<a class="anchor" aria-label="anchor" href="#arg-fun-time"></a></dt>
<dd><p>an optional function. This is only required if the time
scales in the longitudinal part of the model and the survival part are
different. In that case, <code>fun.time</code> is the function that translates the
times from the longitudinal part into the time scale of the survival part.
The default is the identity function which means that the two time scales
are the same.</p></dd>


<dt id="arg-na-action">na.action<a class="anchor" aria-label="anchor" href="#arg-na-action"></a></dt>
<dd><p>Integer indicating how NAs are managed. The default is 1
for 'na.omit'. The alternative is 2 for 'na.fail'. Other options such as
'na.pass' or 'na.exclude' are not implemented in the current version.</p></dd>


<dt id="arg-draws">draws<a class="anchor" aria-label="anchor" href="#arg-draws"></a></dt>
<dd><p>optional boolean specifying whether median and confidence bands
of the predicted values should be computed (TRUE). IF TRUE, a Monte Carlo
approximation of the posterior distribution of the predicted values is
computed and the median, 2.5% and 97.5% percentiles are given. Otherwise,
the predicted values are computed at the point estimate. By default,
draws=FALSE.</p></dd>


<dt id="arg-ndraws">ndraws<a class="anchor" aria-label="anchor" href="#arg-ndraws"></a></dt>
<dd><p>if draws=TRUE, ndraws specifies the number of draws that
should be generated to approximate the posterior distribution of the
predicted values. By default, ndraws=2000.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing :</p>
<dl><dt>pred</dt>
<dd><p>a matrix with 4 columns if
draws=FALSE and 6 columns if draws=TRUE, containing the subjects identifier,
the landmark times, the horizon times, the predicted probability (if
draws=FALSE) or the median, 2.5% and 97.5 % percentiles of the 'ndraws'
probabilities calculated (if draws=TRUE). If a subject has no measurement
before time s or if the event has already occured at time s, his probability
is NA.</p></dd>
 <dt>newdata</dt>
<dd><p>a data frame obtained from argument newdata
containing time measurements and longitudinal observations used to compute
the predictions</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Proust-Lima, Sene, Taylor and Jacqmin-Gadda (2014). Joint latent
class models of longitudinal and time-to-event data: a review. Statistical
Methods in Medical Research 23, 74-90.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="plot.dynpred.html">plot.dynpred</a></code>, <code><a href="Jointlcmm.html">Jointlcmm</a></code>, <code><a href="predictY.html">predictY</a></code>, <code><a href="plot.predict.html">plot.predict</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Cecile Proust-Lima, Viviane Philipps</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Joint latent class model with 2 classes :</span></span></span>
<span class="r-in"><span><span class="va">m32</span> <span class="op">&lt;-</span> <span class="fu"><a href="Jointlcmm.html">Jointlcmm</a></span><span class="op">(</span><span class="va">Ydep1</span><span class="op">~</span><span class="va">Time</span><span class="op">*</span><span class="va">X1</span>,mixture<span class="op">=</span><span class="op">~</span><span class="va">Time</span>,random<span class="op">=</span><span class="op">~</span><span class="va">Time</span>,subject<span class="op">=</span><span class="st">"ID"</span>,</span></span>
<span class="r-in"><span>classmb<span class="op">=</span><span class="op">~</span><span class="va">X3</span>,ng<span class="op">=</span><span class="fl">2</span>,survival<span class="op">=</span><span class="fu">Surv</span><span class="op">(</span><span class="va">Tevent</span>,<span class="va">Event</span><span class="op">)</span><span class="op">~</span><span class="va">X1</span><span class="op">+</span><span class="fu"><a href="ForInternalUse.html">mixture</a></span><span class="op">(</span><span class="va">X2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>hazard<span class="op">=</span><span class="st">"3-quant-splines"</span>,hazardtype<span class="op">=</span><span class="st">"PH"</span>,data<span class="op">=</span><span class="va">data_lcmm</span>,</span></span>
<span class="r-in"><span>B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.641</span>, <span class="op">-</span><span class="fl">0.6217</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0.5045</span>, <span class="fl">0.8115</span>, <span class="op">-</span><span class="fl">0.4316</span>, <span class="fl">0.7798</span>, <span class="fl">0.1027</span>, </span></span>
<span class="r-in"><span><span class="fl">0.7704</span>, <span class="op">-</span><span class="fl">0.0479</span>, <span class="fl">10.4257</span>, <span class="fl">11.2972</span>, <span class="op">-</span><span class="fl">2.5955</span>, <span class="op">-</span><span class="fl">0.5234</span>, <span class="fl">1.4147</span>, </span></span>
<span class="r-in"><span><span class="op">-</span><span class="fl">0.05</span>, <span class="fl">0.9124</span>, <span class="fl">0.0501</span>, <span class="fl">0.2138</span>, <span class="fl">1.5027</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Predictions at landmark 10 and 12 for horizon 3, 5 and 10 for two subjects :</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">dynpred</span><span class="op">(</span><span class="va">m32</span>,landmark<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">12</span><span class="op">)</span>,horizon<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">5</span>,<span class="fl">10</span><span class="op">)</span>,var.time<span class="op">=</span><span class="st">"Time"</span>,</span></span>
<span class="r-in"><span>fun.time<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="fl">10</span><span class="op">*</span><span class="va">x</span><span class="op">}</span>,newdata<span class="op">=</span><span class="va">data_lcmm</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span>,<span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       ID landmark horizon      pred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]  1       10       3 0.2329690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]  1       10       5 0.3788284</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]  1       10      10 0.6368587</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]  1       12       3 0.4250841</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]  1       12       5 0.6318772</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]  1       12      10 0.8845080</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]  2       10       3 0.3278219</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]  2       10       5 0.5266806</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]  2       10      10 0.8370420</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]  2       12       3 0.4077001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11,]  2       12       5 0.6157664</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [12,]  2       12      10 0.8859773</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">dynpred</span><span class="op">(</span><span class="va">m32</span>,landmark<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">12</span><span class="op">)</span>,horizon<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">5</span>,<span class="fl">10</span><span class="op">)</span>,var.time<span class="op">=</span><span class="st">"Time"</span>,</span></span>
<span class="r-in"><span>fun.time<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="fl">10</span><span class="op">*</span><span class="va">x</span><span class="op">}</span>,newdata<span class="op">=</span><span class="va">data_lcmm</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span>,<span class="op">]</span>,draws<span class="op">=</span><span class="cn">TRUE</span>,ndraws<span class="op">=</span><span class="fl">2000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cecile Proust-Lima, Viviane Philipps.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

